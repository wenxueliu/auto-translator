# 智能翻译插件 - 测试清单

## 测试环境准备

1. 打开Chrome浏览器，访问 `chrome://extensions/`
2. 确保已加载最新版本的扩展
3. 打开浏览器开发者工具（F12）查看控制台日志

## 功能测试清单

### 1. 右键菜单测试

#### 1.1 页面翻译
- [ ] 在任意网页空白处右键
- [ ] 验证显示"翻译当前网页"菜单项
- [ ] 点击菜单项，检查控制台是否有日志输出

#### 1.2 中文文本翻译（中文→英文）
- [ ] 在网页上选中文本（例如："你好世界"）
- [ ] 右键查看菜单
- [ ] 验证显示"翻译为英文"菜单项
- [ ] 点击"翻译为英文"，检查是否正确翻译

#### 1.3 英文文本翻译（英文→中文）
- [ ] 在网页上选中英文文本（例如："hello world"）
- [ ] 右键查看菜单
- [ ] 验证显示"翻译选中文本"子菜单
- [ ] 验证子菜单包含"添加到词库"和"添加到词库并翻译"选项

#### 1.4 添加到词库
- [ ] 选中文本（中文或英文）
- [ ] 右键选择"添加到词库"
- [ ] 验证显示添加成功通知
- [ ] 打开插件设置页面，验证词汇已添加到词库

#### 1.5 添加并翻译
- [ ] 选中文本（中文或英文）
- [ ] 右键选择"添加到词库并翻译"
- [ ] 验证词汇被添加到词库
- [ ] 验证选中的文本显示翻译结果

### 2. 语言自动检测测试

#### 2.1 中文检测
- [ ] 选中文本："这是一个测试"
- [ ] 验证显示"翻译为英文"菜单（而不是"翻译选中文本"）

#### 2.2 英文检测
- [ ] 选中文本："This is a test"
- [ ] 验证显示"翻译选中文本"菜单（而不是"翻译为英文"）

#### 2.3 混合文本检测
- [ ] 选中文本："This是测试"
- [ ] 验证菜单行为（应按优先级显示）

### 3. 词库管理测试

#### 3.1 查看词库
- [ ] 点击插件图标打开设置页面
- [ ] 验证显示所有已添加的词汇
- [ ] 验证中文词汇显示拼音
- [ ] 验证显示语言标签（中文/英文）
- [ ] 验证显示类型标签（单词/短语）

#### 3.2 语言筛选
- [ ] 在设置页面选择"全部"筛选器
- [ ] 验证显示所有词汇
- [ ] 选择"中文"筛选器
- [ ] 验证只显示中文词汇
- [ ] 选择"英文"筛选器
- [ ] 验证只显示英文词汇

#### 3.3 删除单词
- [ ] 在词库列表中点击某个词汇的"删除"按钮
- [ ] 验证显示删除成功通知
- [ ] 验证词汇从列表中移除

#### 3.4 导出词库
- [ ] 点击"导出词库"按钮
- [ ] 验证文件下载成功
- [ ] 打开下载的JSON文件
- [ ] 验证文件包含version、exportDate、statistics和vocabulary字段
- [ ] 验证statistics中包含total、chinese、english统计

#### 3.5 导入词库
- [ ] 点击"导入词库"按钮
- [ ] 选择之前导出的JSON文件
- [ ] 验证显示导入成功通知（包含新增和更新数量）
- [ ] 验证词库正确合并
- [ ] 尝试导入旧格式JSON文件（直接是词库对象）
- [ ] 验证兼容旧格式

### 4. API配置测试

#### 4.1 Qwen模型（推荐）
- [ ] 获取Qwen API Key
- [ ] 在设置页面输入API Key
- [ ] 选择"qwen-mt-turbo"模型
- [ ] 保存配置
- [ ] 测试翻译功能，验证工作正常

#### 4.2 OpenAI模型
- [ ] 输入OpenAI API Key
- [ ] 选择"gpt-3.5-turbo"或其他OpenAI模型
- [ ] 保存配置
- [ ] 测试翻译功能

#### 4.3 自定义模型
- [ ] 选择"custom-openai"模型
- [ ] 填写自定义API URL
- [ ] 填写自定义模型名称
- [ ] 保存配置
- [ ] 测试翻译功能

### 5. 翻译设置测试

#### 5.1 翻译方向
- [ ] 设置为"自动"
- [ ] 测试中文→英文翻译
- [ ] 测试英文→中文翻译
- [ ] 设置为"中文到英文"
- [ ] 验证所有翻译都是中文到英文
- [ ] 设置为"英文到中文"
- [ ] 验证所有翻译都是英文到中文

#### 5.2 上下文感知翻译
- [ ] 启用"上下文感知翻译"
- [ ] 测试多义词翻译（例如："bank"）
- [ ] 验证翻译考虑上下文
- [ ] 禁用"上下文感知翻译"
- [ ] 验证翻译不使用上下文

#### 5.3 拼音显示
- [ ] 启用"显示拼音"
- [ ] 验证中文词汇显示拼音
- [ ] 禁用"显示拼音"
- [ ] 验证中文词汇不显示拼音

### 6. 边界情况测试

#### 6.1 空词库
- [ ] 清空词库
- [ ] 点击"翻译当前网页"
- [ ] 验证显示提示信息（未找到匹配词汇）

#### 6.2 重复添加
- [ ] 添加同一个词汇两次
- [ ] 验证只添加一次（显示"已存在"提示）

#### 6.3 特殊字符
- [ ] 选中包含特殊字符的文本
- [ ] 验证能正确添加和翻译

#### 6.4 长文本
- [ ] 选中长句子或段落
- [ ] 验证能正确添加和翻译

#### 6.5 无API Key
- [ ] 清空API Key
- [ ] 尝试翻译
- [ ] 验证显示"无API key"提示

### 7. 性能测试

#### 7.1 大量词汇
- [ ] 添加100个以上的词汇
- [ ] 测试翻译页面性能
- [ ] 验证词库列表加载正常

#### 7.2 大页面
- [ ] 在内容丰富的长页面测试翻译
- [ ] 验证翻译速度可接受

### 8. 错误处理测试

#### 8.1 无效API Key
- [ ] 输入无效的API Key
- [ ] 尝试翻译
- [ ] 验证显示错误提示

#### 8.2 网络错误
- [ ] 断开网络连接
- [ ] 尝试翻译
- [ ] 验证显示错误提示或使用本地缓存

#### 8.3 无效导入文件
- [ ] 尝试导入非JSON文件
- [ ] 验证显示错误提示
- [ ] 尝试导入格式错误的JSON
- [ ] 验证显示具体错误信息

### 9. 用户体验测试

#### 9.1 通知显示
- [ ] 验证所有操作都有适当的通知反馈
- [ ] 验证成功通知为绿色
- [ ] 验证错误通知为红色
- [ ] 验证通知3秒后自动消失

#### 9.2 界面响应
- [ ] 验证所有按钮点击有响应
- [ ] 验证下拉菜单切换正常
- [ ] 验证自定义模型配置显示/隐藏正常

#### 9.3 数据持久化
- [ ] 添加词汇后刷新页面
- [ ] 验证词库数据仍然存在
- [ ] 修改设置后刷新页面
- [ ] 验证设置仍然保存

## 已知问题记录

在测试过程中发现的问题请记录在这里：

| 问题编号 | 问题描述 | 严重程度 | 状态 |
|---------|---------|---------|------|
|         |         |         |      |

## 测试结果总结

- 测试日期：_______________
- 测试人员：_______________
- Chrome版本：_______________
- 插件版本：_______________
- 通过测试项：_____ / _____
- 失败测试项：_____ / _____
- 整体评价：_______________
